# RideMatch Environment Configuration Template
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control!

#=============================================================================
# GLOBAL SETTINGS
#=============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Project name
PROJECT_NAME=RideMatch

# API Gateway URL
API_GATEWAY_URL=http://localhost

#=============================================================================
# DATABASE CONFIGURATION
#=============================================================================

# PostgreSQL - Global Settings
POSTGRES_USER=ridematch_user
POSTGRES_PASSWORD=change_this_secure_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Auth Service Database
AUTH_DB_NAME=auth_db
AUTH_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@auth-db:5432/${AUTH_DB_NAME}

# Rides Service Database
RIDES_DB_NAME=rides_db
RIDES_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@rides-db:5432/${RIDES_DB_NAME}

# Search Service Database (with PostGIS)
SEARCH_DB_NAME=search_db
SEARCH_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@search-db:5432/${SEARCH_DB_NAME}

# Feedback Service Database
FEEDBACK_DB_NAME=feedback_db
FEEDBACK_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@feedback-db:5432/${FEEDBACK_DB_NAME}

# Admin Service Database
ADMIN_DB_NAME=admin_db
ADMIN_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@admin-db:5432/${ADMIN_DB_NAME}

#=============================================================================
# REDIS CONFIGURATION
#=============================================================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Redis for sessions (auth-service)
REDIS_SESSION_DB=0

# Redis for cache (general)
REDIS_CACHE_DB=1

# Redis for notifications queue
REDIS_NOTIFICATIONS_DB=2

#=============================================================================
# JWT / AUTHENTICATION CONFIGURATION
#=============================================================================

# JWT Secret Key - MUST be changed in production!
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=your_super_secret_jwt_key_change_this_in_production_min_32_chars

# JWT Algorithm
JWT_ALGORITHM=HS256

# Token expiration times
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
BCRYPT_ROUNDS=12

#=============================================================================
# MICROSERVICES CONFIGURATION
#=============================================================================

# Auth Service
AUTH_SERVICE_HOST=auth-service
AUTH_SERVICE_PORT=8001
AUTH_SERVICE_URL=http://${AUTH_SERVICE_HOST}:${AUTH_SERVICE_PORT}

# Rides Service
RIDES_SERVICE_HOST=rides-service
RIDES_SERVICE_PORT=8002
RIDES_SERVICE_URL=http://${RIDES_SERVICE_HOST}:${RIDES_SERVICE_PORT}

# Search Service
SEARCH_SERVICE_HOST=search-service
SEARCH_SERVICE_PORT=8003
SEARCH_SERVICE_URL=http://${SEARCH_SERVICE_HOST}:${SEARCH_SERVICE_PORT}

# Feedback Service
FEEDBACK_SERVICE_HOST=feedback-service
FEEDBACK_SERVICE_PORT=8004
FEEDBACK_SERVICE_URL=http://${FEEDBACK_SERVICE_HOST}:${FEEDBACK_SERVICE_PORT}

# Notifications Service
NOTIFICATIONS_SERVICE_HOST=notifications-service
NOTIFICATIONS_SERVICE_PORT=8005
NOTIFICATIONS_SERVICE_URL=http://${NOTIFICATIONS_SERVICE_HOST}:${NOTIFICATIONS_SERVICE_PORT}

# Admin Service
ADMIN_SERVICE_HOST=admin-service
ADMIN_SERVICE_PORT=8006
ADMIN_SERVICE_URL=http://${ADMIN_SERVICE_HOST}:${ADMIN_SERVICE_PORT}

#=============================================================================
# FRONTEND CONFIGURATION
#=============================================================================

FRONTEND_URL=http://localhost:3000
FRONTEND_PORT=3000

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost

#=============================================================================
# EMAIL / SMTP CONFIGURATION (Notifications Service)
#=============================================================================

# SMTP Server Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@example.com
SMTP_PASSWORD=your_email_app_password
SMTP_FROM_EMAIL=noreply@ridematch.com
SMTP_FROM_NAME=RideMatch

# Email Settings
ENABLE_EMAIL_NOTIFICATIONS=true

# Email Templates
EMAIL_TEMPLATES_DIR=/app/templates/email

#=============================================================================
# WEBSOCKET CONFIGURATION (Notifications Service)
#=============================================================================

# WebSocket Settings
WEBSOCKET_HOST=0.0.0.0
WEBSOCKET_PORT=8005
ENABLE_WEBSOCKET_NOTIFICATIONS=true

#=============================================================================
# SEARCH / MATCHING ALGORITHM CONFIGURATION
#=============================================================================

# Minimum match score to return results (0-100)
MIN_MATCH_SCORE=40

# Search radius in kilometers
SEARCH_RADIUS_KM=50

# Time window for departure matching (hours)
TIME_WINDOW_HOURS=2

# Scoring weights (must sum to 100)
SCORE_WEIGHT_ROUTE=40
SCORE_WEIGHT_TIME=25
SCORE_WEIGHT_PRICE=15
SCORE_WEIGHT_RATING=10
SCORE_WEIGHT_PREFERENCES=10

#=============================================================================
# FILE UPLOAD CONFIGURATION
#=============================================================================

# Max file size for uploads (bytes)
MAX_UPLOAD_SIZE=5242880  # 5MB

# Allowed image formats
ALLOWED_IMAGE_EXTENSIONS=jpg,jpeg,png,gif,webp

# Upload directory
UPLOAD_DIR=/app/uploads

#=============================================================================
# LOGGING CONFIGURATION
#=============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format (json, text)
LOG_FORMAT=json

# Enable request logging
LOG_REQUESTS=true

#=============================================================================
# RATE LIMITING
#=============================================================================

# Enable rate limiting
ENABLE_RATE_LIMITING=true

# Requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

#=============================================================================
# SECURITY SETTINGS
#=============================================================================

# Enable HTTPS redirect (production only)
ENABLE_HTTPS_REDIRECT=false

# Session timeout (minutes)
SESSION_TIMEOUT_MINUTES=30

# Max login attempts before lockout
MAX_LOGIN_ATTEMPTS=5

# Account lockout duration (minutes)
LOCKOUT_DURATION_MINUTES=15

#=============================================================================
# EXTERNAL SERVICES (Optional)
#=============================================================================

# Google Maps API (for geocoding and routing)
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# Mapbox API (alternative to Google Maps)
MAPBOX_API_KEY=your_mapbox_api_key_here

# Twilio (for SMS notifications - optional)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# Payment Gateway (future feature)
STRIPE_API_KEY=your_stripe_api_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret

#=============================================================================
# DEVELOPMENT / DEBUGGING
#=============================================================================

# Enable debug mode (NEVER in production!)
DEBUG=true

# Enable FastAPI auto-reload
AUTO_RELOAD=true

# Enable SQL query logging
LOG_SQL_QUERIES=false

# Seed database with test data
SEED_DATABASE=false

#=============================================================================
# MONITORING & ANALYTICS (Future)
#=============================================================================

# Sentry DSN for error tracking
SENTRY_DSN=

# Google Analytics ID
GOOGLE_ANALYTICS_ID=

# New Relic License Key
NEW_RELIC_LICENSE_KEY=

#=============================================================================
# DOCKER CONFIGURATION
#=============================================================================

# Docker compose project name
COMPOSE_PROJECT_NAME=ridematch

# Restart policy
RESTART_POLICY=unless-stopped
